<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Fixes - White Bar & Scroll Button</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-pass { color: #1b8e2d; font-weight: bold; }
        .test-fail { color: #d32f2f; font-weight: bold; }
        button {
            background: #1b8e2d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #156b22; }
        pre {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üîç Local Test Results - White Bar & Scroll Button Fixes</h1>
    
    <div class="test-section">
        <h2>Test 1: White Bar Fix</h2>
        <p>Open <a href="http://localhost:3000" target="_blank">http://localhost:3000</a> and check:</p>
        <ul>
            <li>‚úÖ No white bar above the header</li>
            <li>‚úÖ Header starts at the very top (top: 0)</li>
            <li>‚úÖ Body has position: relative</li>
        </ul>
        <button onclick="testWhiteBar()">Run Test 1</button>
        <div id="test1-result"></div>
    </div>
    
    <div class="test-section">
        <h2>Test 2: Scroll Button Configuration</h2>
        <p>Check scroll button attributes:</p>
        <ul>
            <li>‚úÖ Button aria-label = "Zu den Fahrzeugen scrollen"</li>
            <li>‚úÖ Button title = "Zu den Fahrzeugen"</li>
            <li>‚úÖ Car section (#fahrzeuge) exists</li>
        </ul>
        <button onclick="testScrollButton()">Run Test 2</button>
        <div id="test2-result"></div>
    </div>
    
    <div class="test-section">
        <h2>Test 3: Scroll Button Functionality</h2>
        <p>Test the scroll behavior:</p>
        <ol>
            <li>Scroll down past 400px to see the button</li>
            <li>Click the scroll button</li>
            <li>Verify it scrolls to car section (#fahrzeuge)</li>
        </ol>
        <button onclick="testScrollFunctionality()">Run Test 3</button>
        <div id="test3-result"></div>
    </div>
    
    <div class="test-section">
        <h2>All Tests Summary</h2>
        <button onclick="runAllTests()">Run All Tests</button>
        <div id="summary-result"></div>
    </div>

    <script>
        async function fetchPage() {
            try {
                const response = await fetch('http://localhost:3000');
                const html = await response.text();
                const parser = new DOMParser();
                return parser.parseFromString(html, 'text/html');
            } catch (error) {
                return null;
            }
        }

        async function testWhiteBar() {
            const result = document.getElementById('test1-result');
            result.innerHTML = '<p>Testing...</p>';
            
            const doc = await fetchPage();
            if (!doc) {
                result.innerHTML = '<p class="test-fail">‚ùå Cannot connect to http://localhost:3000. Is the server running?</p>';
                return;
            }
            
            const body = doc.body;
            const bodyStyle = body ? window.getComputedStyle ? 'relative' : (body.getAttribute('style') || '').includes('position: relative') : null;
            const header = doc.querySelector('.header');
            
            // Check inline critical CSS
            const criticalCSS = doc.querySelector('style');
            const hasPositionRelative = criticalCSS && criticalCSS.textContent.includes('body') && criticalCSS.textContent.includes('position: relative');
            
            const passed = hasPositionRelative;
            
            result.innerHTML = `
                <p class="${passed ? 'test-pass' : 'test-fail'}">
                    ${passed ? '‚úÖ' : '‚ùå'} White Bar Fix Test
                </p>
                <pre>Body position in critical CSS: ${hasPositionRelative ? 'position: relative ‚úì' : 'NOT FOUND ‚úó'}</pre>
            `;
        }

        async function testScrollButton() {
            const result = document.getElementById('test2-result');
            result.innerHTML = '<p>Testing...</p>';
            
            const doc = await fetchPage();
            if (!doc) {
                result.innerHTML = '<p class="test-fail">‚ùå Cannot connect to http://localhost:3000</p>';
                return;
            }
            
            const scrollButton = doc.getElementById('back-to-top');
            const carSection = doc.getElementById('fahrzeuge');
            const ariaLabel = scrollButton ? scrollButton.getAttribute('aria-label') : null;
            const title = scrollButton ? scrollButton.getAttribute('title') : null;
            
            const passed = scrollButton && 
                          ariaLabel === 'Zu den Fahrzeugen scrollen' &&
                          title === 'Zu den Fahrzeugen' &&
                          carSection;
            
            result.innerHTML = `
                <p class="${passed ? 'test-pass' : 'test-fail'}">
                    ${passed ? '‚úÖ' : '‚ùå'} Scroll Button Configuration Test
                </p>
                <pre>Button exists: ${scrollButton ? 'Yes ‚úì' : 'No ‚úó'}
Aria-label: ${ariaLabel || 'NOT FOUND'}
Title: ${title || 'NOT FOUND'}
Car section exists: ${carSection ? 'Yes ‚úì' : 'No ‚úó'}</pre>
            `;
        }

        async function testScrollFunctionality() {
            const result = document.getElementById('test3-result');
            result.innerHTML = '<p>‚ö†Ô∏è This test requires manual interaction. Please:</p><ol><li>Open http://localhost:3000 in a new tab</li><li>Scroll down past 400px</li><li>Click the scroll button</li><li>Verify it scrolls to the car section</li></ol>';
        }

        async function runAllTests() {
            const summary = document.getElementById('summary-result');
            summary.innerHTML = '<p>Running all tests...</p>';
            
            await testWhiteBar();
            await new Promise(r => setTimeout(r, 500));
            await testScrollButton();
            await new Promise(r => setTimeout(r, 500));
            
            summary.innerHTML = '<p class="test-pass">‚úÖ All automated tests completed. Please manually verify scroll button functionality.</p>';
        }
    </script>
</body>
</html>



